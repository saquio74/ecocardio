(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53faab88","chunk-2d0a3cd6"],{"0473":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{id:"postUpdate",size:"lg","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(" Actualizar Post ")]},proxy:!0}])},[a("div",{staticClass:"d-block text-center"},[a("form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.guardarPost(e)}}},[a("div",{staticClass:"form-group row mt-2"},[a("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"staticEmail"}},[t._v("titulo")]),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.post.title,expression:"post.title"}],staticClass:"form-control",attrs:{required:"",type:"text",placeholder:"titulo"},domProps:{value:t.post.title},on:{input:function(e){e.target.composing||t.$set(t.post,"title",e.target.value)}}})])]),a("div",{staticClass:"form-group row mt-2"},[a("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"staticEmail"}},[t._v("Contenido")]),a("div",{staticClass:"col-sm-7"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post.description,expression:"post.description"}],staticClass:"form-control",attrs:{required:"",placeholder:"Descripcion de tu Post"},domProps:{value:t.post.description},on:{input:function(e){e.target.composing||t.$set(t.post,"description",e.target.value)}}})])]),a("div",{staticClass:"form-group row mt-2"},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Imagen del Post")]),a("div",{staticClass:"col-sm-7"},[a("input",{attrs:{type:"file",id:"file",accept:"image/*"},on:{change:t.upload}}),a("br"),a("img",{staticClass:"col-sm-12",attrs:{id:"img",src:t.image}})])]),a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-primary col-sm-8",attrs:{type:"submit"}},[t._v("Actualizar Post")])])])])])},r=[],o=(a("a4d3"),a("e01a"),a("96cf"),a("1da1")),i=a("5530"),n=a("2b0e"),c=a("bc3a"),l=a.n(c),u=a("2f62"),d=n["default"].extend({props:{postData:{}},data:function(){return{miniatura:"",post:{title:"",description:"",user_id:"",img:""}}},methods:Object(i["a"])({upload:function(t){this.post.user_id=this.user.id,this.post.img=t.target.files[0],this.loadImg(this.post.img)},loadImg:function(t){var e=this,a=new FileReader;a.onload=function(t){e.miniatura=t.target.result},a.readAsDataURL(t)},guardarPost:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("id",t.post.id),a.append("title",t.post.title),a.append("description",t.post.description),a.append("user_id",t.user.id),a.append("img",t.post.img),e.prev=6,s=localStorage.getItem("token"),e.next=10,l.a.create({headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).post("api/postUpdate",a);case 10:return e.sent,t.post.title="",t.post.description="",t.$notify({group:"foo",title:"¡¡¡Listo!!!",text:"Post guardado exitosamente!!!!!",type:"success"}),r={id:t.user.id},e.next=17,t.getPost();case 17:return e.next=19,t.getMyPosts(r);case 19:t.$bvModal.hide("postUpdate"),e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](6),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[6,22]])})))()},mostrarDatos:function(){this.post.title=this.postData.title,this.post.description=this.postData.description,this.post.img=this.postData.img,this.post.id=this.postData.id}},Object(u["b"])("post",["getPost","getMyPosts"])),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["user"])),{},{image:function(){return this.miniatura}}),watch:{postData:{handler:function(){this.mostrarDatos()}}}}),p=d,m=a("2877"),g=Object(m["a"])(p,s,r,!1,null,null,null);e["default"]=g.exports},"3ded":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"btn btn-primary col-sm-12",attrs:{disabled:""}},[a("b-spinner",{attrs:{small:"",type:"grow"}}),t._v(" Espere por favor... ")],1)])},r=[],o=a("2877"),i={},n=Object(o["a"])(i,s,r,!1,null,null,null);e["a"]=n.exports},"870c":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{id:"postCreate",size:"lg","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(" Crear Nuevo Post ")]},proxy:!0}])},[a("div",{staticClass:"d-block text-center"},[a("form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.guardarPost(e)}}},[a("div",{staticClass:"form-group row mt-2"},[a("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"staticEmail"}},[t._v("titulo")]),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.post.title,expression:"post.title"}],staticClass:"form-control",attrs:{required:"",type:"text",placeholder:"titulo"},domProps:{value:t.post.title},on:{input:function(e){e.target.composing||t.$set(t.post,"title",e.target.value)}}})])]),a("div",{staticClass:"form-group row mt-2"},[a("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"staticEmail"}},[t._v("Contenido")]),a("div",{staticClass:"col-sm-7"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post.description,expression:"post.description"}],staticClass:"form-control",attrs:{required:"",placeholder:"Descripcion de tu Post"},domProps:{value:t.post.description},on:{input:function(e){e.target.composing||t.$set(t.post,"description",e.target.value)}}})])]),a("div",{staticClass:"form-group row mt-2"},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Imagen del Post")]),a("div",{staticClass:"col-sm-7"},[a("input",{attrs:{type:"file",id:"file",accept:"image/*"},on:{change:t.upload}}),a("br"),a("img",{staticClass:"col-sm-12",attrs:{id:"img",src:t.image}})])]),0==t.bandera?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-primary col-sm-8",attrs:{type:"submit"}},[t._v("Guardar Post")])]):a("div",{staticClass:"text-center"},[a("buttonWait")],1)])])])},r=[],o=(a("a4d3"),a("e01a"),a("96cf"),a("1da1")),i=a("5530"),n=a("bc3a"),c=a.n(n),l=a("2b0e"),u=a("2f62"),d=(a("ee98"),a("3ded")),p=l["default"].extend({components:{buttonWait:d["a"]},data:function(){return{miniatura:"",post:{title:"",description:"",user_id:"",img:""},bandera:0}},methods:Object(i["a"])({upload:function(t){this.post.user_id=this.user.id,this.post.img=t.target.files[0],this.loadImg(this.post.img)},loadImg:function(t){var e=this,a=new FileReader;a.onload=function(t){e.miniatura=t.target.result},a.readAsDataURL(t)},guardarPost:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.bandera++,a=new FormData,a.append("title",t.post.title),a.append("description",t.post.description),a.append("user_id",t.user.id),a.append("img",t.post.img),e.prev=6,s=localStorage.getItem("token"),e.next=10,c.a.create({headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).post("api/postCreate",a);case 10:return e.sent,t.post.title="",t.post.description="",t.$notify({group:"foo",title:"¡¡¡Listo!!!",text:"Post guardado exitosamente!!!!!",type:"success"}),e.next=16,t.getPost();case 16:return r={id:t.user.id},e.next=19,t.getMyPosts(r);case 19:t.$bvModal.hide("postCreate"),t.bandera--,e.next=27;break;case 23:e.prev=23,e.t0=e["catch"](6),t.$notify({group:"foo",title:"¡¡¡ocurrio un error!!!",text:e.t0,type:"error"}),t.bandera--;case 27:case"end":return e.stop()}}),e,null,[[6,23]])})))()}},Object(u["b"])("post",["getPost","getMyPosts"])),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["user"])),{},{image:function(){return this.miniatura}})}),m=p,g=a("2877"),b=Object(g["a"])(m,s,r,!1,null,null,null);e["a"]=b.exports},f7f6:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("br"),t.user?a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.postCreate",modifiers:{postCreate:!0}}],attrs:{variant:"outline-dark"}},[t._v("Crear nuevo post")]):t._e(),t.user?a("b-button",{attrs:{variant:"outline-dark",to:"/post"}},[t._v("Ver todos los posts")]):t._e(),a("br"),0==t.myPost?a("div",{staticClass:"col-sm-12 text-center"},[a("br"),a("br"),a("loading")],1):t._e(),t._l(t.myPost,(function(e){return a("div",{key:e.id,staticClass:"text-center"},[a("b-card",{staticClass:"overflow-hidden",attrs:{"bg-variant":"white","text-variant":"dark","body-border-variant":"primary"}},[a("b-row",{attrs:{"no-gutters":""}},[a("b-col",{attrs:{md:"12"}},[a("b-card-header",{attrs:{"header-border-variant":"primary","header-bg-variant":"primary","header-text-variant":"white",align:"center"}},[a("b-col",{attrs:{md:"12"}},[a("h4",[t._v(t._s(e.title))])]),a("b-col",{attrs:{md:"12"}},[a("h6",[t._v(" Autor: "+t._s(e.name)+" ")])]),a("b-col",{attrs:{md:"12"}},[a("h6",[t._v(" Fecha: "+t._s(t.getDateFormated(e.created_at))+" ")])])],1)],1),a("b-col",{staticClass:"mt-2",attrs:{md:"3"}},[a("b-card-img",{staticClass:"rounded-0 outline-primary",attrs:{src:t.dataUrl+e.img,width:"100",alt:"Image"}})],1),a("b-col",{attrs:{md:"9"}},[a("b-col",{staticClass:"mt-2",attrs:{md:"12"}}),a("b-card-body",{attrs:{title:"Horizontal Card","body-text-variant":"dark","body-border-variant":"primary"}},[a("b-card-text",[t._v(" "+t._s(e.description)+" ")])],1)],1),a("b-col",{attrs:{md:"2",sm:"12","offset-md":"6"}},[a("button",{directives:[{name:"b-modal",rawName:"v-b-modal.postUpdate",modifiers:{postUpdate:!0}}],staticClass:"btn btn-warning btn-block",on:{click:function(a){return t.setPost(e)}}},[t._v("Modificar")])]),a("b-col",{attrs:{md:"2",sm:"12"}},[a("button",{staticClass:"btn btn-danger btn-block",on:{click:function(a){return t.borrarPost(e.id)}}},[t._v("borrar")])])],1)],1),a("br")],1)})),a("div",[a("nav",[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item"},[t.myPagination.current_page>1?a("button",{staticClass:"page-link",on:{click:function(e){return e.preventDefault(),t.changePage(t.myPagination.current_page-1)}}},[t._v("Previous")]):t._e()]),t._l(t.paginated,(function(e){return a("li",{key:e,staticClass:"page-item",class:e==t.myPagination.current_page?"active":"",on:{click:function(a){return a.preventDefault(),t.changePage(e)}}},[a("button",{staticClass:"page-link"},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item"},[t.myPagination.current_page<t.myPagination.last_page?a("button",{staticClass:"page-link",on:{click:function(e){return e.preventDefault(),t.changePage(t.myPagination.current_page+1)}}},[t._v("Next")]):t._e()])],2)])]),a("postCreate"),a("postUpdate",{attrs:{postData:t.postInfo}})],2)},r=[],o=(a("96cf"),a("1da1")),i=a("5530"),n=a("2b0e"),c=a("1940"),l=a.n(c),u=a("bc3a"),d=a.n(u),p=a("2f62"),m=a("870c"),g=a("0473"),b=a("2ecc"),f=a("c1df"),v=a.n(f),h=n["default"].extend({components:{postCreate:m["a"],postUpdate:g["default"],loading:b["a"]},data:function(){return{url:{},postInfo:{}}},created:function(){this.sinPost()},methods:Object(i["a"])(Object(i["a"])({},Object(p["b"])("post",["getMyPosts"])),{},{getDateFormated:function(t){return v.a.locale("es"),v()(t).format("LLLL")},sinPost:function(){this.user?this.getPost():this.$router.push("/post")},getPost:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t){a.next=7;break}return e.url.id=e.user.id,e.url.page=t,a.next=5,e.getMyPosts(e.url);case 5:a.next=10;break;case 7:return e.url.id=e.user.id,a.next=10,e.getMyPosts(e.url);case 10:case"end":return a.stop()}}),a)})))()},changePage:function(t){this.myPagination.current_page=t,this.getPost(t)},setPost:function(t){this.postInfo=t},borrarPost:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,l()({title:"¿Estas seguro de borrar este POST?",text:"Una vez borrado, no podras recuperarlo!",icon:"warning",buttons:!0,dangerMode:!0});case 2:if(s=a.sent,!0!==s){a.next=23;break}return a.prev=4,r=localStorage.getItem("token"),a.next=8,d.a.create({headers:{"Content-Type":"application/json",Authorization:"Bearer "+r}}).delete("api/postDelete/".concat(t));case 8:return a.sent,o={id:e.user.id},a.next=12,e.getPost();case 12:return a.next=14,e.getMyPosts(o);case 14:l()("Poof! tu POST ha sido borrado!",{icon:"success"}),a.next=21;break;case 17:a.prev=17,a.t0=a["catch"](4),console.log(a.t0),l()("ha ocurrido un error!",{icon:"error"});case 21:a.next=24;break;case 23:l()("Tu POST esta seguro!",{icon:"success"});case 24:case"end":return a.stop()}}),a,null,[[4,17]])})))()}}),computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(p["c"])("post",["myPost","myPagination","dataUrl"])),Object(p["c"])(["user"])),{},{paginated:function(){if(!this.myPagination.to)return[];var t=this.myPagination.current_page-2<=0?1:this.myPagination.current_page-1,e=t+4>this.myPagination.last_page?e=this.myPagination.last_page:t+2,a=[];while(t<=e)a.push(t),t++;return a}})}),P=h,C=a("2877"),_=Object(C["a"])(P,s,r,!1,null,null,null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-53faab88.0d8ba95d.js.map